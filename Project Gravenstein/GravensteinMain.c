#pragma config(Motor,  port1,           leftMotor,     tmotorVex393_HBridge, openLoop, reversed, driveLeft)
#pragma config(Motor,  port2,           launcherLeft,  tmotorVex393_MC29, openLoop)
#pragma config(Motor,  port3,           launcherRight, tmotorVex393_MC29, openLoop)
#pragma config(Motor,  port10,          rightMotor,    tmotorVex393_HBridge, openLoop, reversed, driveRight)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

/*
* Project Gravenstein
* Wes Ring
* DDDDDDADADADADADADADADADADADA ANNANANANANANANANNANANAN
*/


void stopLauncher(void){
	stopMotor(launcherLeft);
	stopMotor(launcherRight);
}

void runLauncher(int _speed) {
	setMotor(launcherLeft, -_speed);
	setMotor(launcherRight, _speed);
}

void startLauncher(void){
	int i = 5;
	while(i < 100){
		i++;
		wait(0.2);
		runLauncher(i);
	}
}

void roboControl(void){ //For autonomous contro	//This is test code
	//We spin in a circle for 5 seconds
	setMotor(leftMotor,100);
	setMotor(rightMotor,-100);
	wait(5);
	stopMotor(leftMotor);
	stopMotor(rightMotor);
}

void manualControl(void){ //For manual control
	if (abs(vexRT(Ch2)) > 5 || abs(vexRT(Ch3)) > 5){ //Only move if we pop over 5 units on the controls
		//Run the motors at the joystick input
		setMotor(leftMotor,vexRT(Ch3));
		setMotor(rightMotor,vexRT(Ch2));
	}
	else
	{
		//Kill the motors
		stopMotor(leftMotor);
		stopMotor(rightMotor);
	}
	if (vexRT(Btn7R)){ startLauncher();} //Accelerates launcher to 100
	if (vexRT(Btn7D)){ runLauncher(65);} //Sets launcher speed to 65
	if (vexRT(Btn7L)){ runLauncher(100);} //Sets launcher speed to 100
	if (vexRT(Btn7U)){ runLauncher(127);} //Sets launcher speed to 127 (max)
	if (vexRT(Btn8L)){ stopLauncher();} //Kills the launcher
}

task main(){
	//enableCompetitionMode(); //This makes it so the Vex Competition machine can take control
	bool _CompetitionMode = false; //Allowing us to refrence if we are in Competition Mode

	repeat(forever){
		if ( _CompetitionMode == true){
			if (getCompetitionDriverControl() == true) {manualControl();} //Competition driver Controls
			if (getCompetitionAutonomous() == true) {roboControl();} //Competition robo Controls
			} else {
			manualControl(); //For driver controls
			if (vexRT(Btn8U)){ roboControl();} //If 8L is pressed, we go into auto test mode
		}
	}
}
